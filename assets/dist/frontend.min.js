jQuery(document).ready(function(a){"use strict";function b(b,c){p=a.ajax({url:aasf.ajaxurl,type:"post",data:{action:"find-posts",aasfNonce:aasf.aasfNonce,isCategory:aasf.isCategory,filters:b,paged:c},beforeSend:function(){k()},success:function(b){4==p.readyState&&(a(".content").html(b),l())},error:function(a){n.html("<p>There has been an error</p>"),l()}})}function c(c,d){var e=i(),f=a('input[type="search"').val();e&&e.hasOwnProperty("s")&&(c.s=f?f:e.s),b(c,d)}function d(a){a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}function e(){q||(q=_.debounce(function(a,b){c(a,b)},500)),a(".aasf-field input").change(function(){q(h(),1)}),a(".aasf-tax-term a").click(function(b){d(b);var c=a(b.target),e=a("a[data-terms]"),f=c.data("terms");e=a("a[data-terms]").removeClass("active-filter"),c.addClass("active-filter"),q(g(f),1)}),a(".aasf-trigger").click(function(b){var c=a(this).closest("li"),d=c.find("ul"),e=a(this).find("div");d.toggle(),d.is(":visible")?(e.removeClass("aasf-left"),e.addClass("aasf-down")):(e.removeClass("aasf-down"),e.addClass("aasf-left"))}),a(".pages-filter a.page-numbers").click(function(b){var c,d,e=a(b.target).attr("href"),i=e.match(/\/page\/(\d+)\//);c=a(".active-filter"),d=c.length?g(c.data("terms")):a(".aasf-tax-terms").length?h():f(),i=i?i[1]:1,q(d,i)})}function f(){var a={},b=location.pathname.split("/"),c=b.filter(function(a){return""!==a.trim()});return a[c[0]]=[],a[c[0]].push(c[1]),a}function g(a){var b,c={},d=a.split(",");return _.each(d,function(a){b=a.split("__"),c[b[0]]||(c[b[0]]=[]),c[b[0]].push(b[1])}),c}function h(){var b={},c=a(".aasf-field input:checked");return _.each(c,function(c){var d=a(c).attr("rel"),e=a(c).val();b[d]||(b[d]=[]),b[d].push(e)}),b}function i(){var b,c={};return a.each(document.location.search.substr(1).split("&"),function(a,d){d&&(b=d.split("="),c[b[0].toString()]=b[1].toString())}),c}function j(){r.append('<div class="cssloader"><i></i><i></i><i></i></div>'),r.css(" position","relative"),o=a(".cssloader"),l()}function k(){a("main").addClass("overlay"),o.show()}function l(){a("main").removeClass("overlay"),o.hide()}function m(){e(),j()}var n,o,p=null,q=null,r=a(".content").parent();m()});